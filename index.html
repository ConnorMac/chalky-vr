<!DOCTYPE html>
<html>
  <head>
    <meta
      http-equiv="origin-trial"
      data-feature="WebVR (For Chrome M59+)"
      data-expires="2017-07-28"
      content="ArFv1ZeTwzkhjNE00uAE+XtiQB41fwqG/TqlFMLrepd9sforQSvQE/tgfIbUMYNuNre4QR1k4/z8xp2mV3dbhwwAAABeeyJvcmlnaW4iOiJodHRwczovL2FmcmFtZS5pbzo0NDMiLCJmZWF0dXJlIjoiV2ViVlIxLjEiLCJleHBpcnkiOjE1MDEyMTcwMDIsImlzU3ViZG9tYWluIjp0cnVlfQ=="
    />
    <meta charset="utf-8" />
    <title>Laser Controls</title>
    <meta name="description" content="Laser Controls - A-Frame" />
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="components/intersect-color-change.js"></script>
    <script src="https://unpkg.com/aframe-teleport-controls@0.2.x/dist/aframe-teleport-controls.min.js"></script>
    <script src="https://unpkg.com/aframe-haptics-component/dist/aframe-haptics-component.min.js"></script>
  </head>
  <body>
    <script>
      // Create boxes.
      AFRAME.registerComponent("stage", {
        init: function () {
            var box;
            var el = this.el;
            box = document.createElement("a-entity");
            box.setAttribute("mixin", "chalkboard");
            box.setAttribute("position", { x: 0, y: 5, z: 1.5 });
            el.appendChild(box);
        },
      });

      AFRAME.registerComponent("shadow-if-mobile", {
        init: function () {
          if (!this.el.sceneEl.isMobile) {
            this.el.setAttribute("light", {
              castShadow: true,
              shadowMapWidth: 2048,
              shadowMapHeight: 1024,
            });
          }
        },
      });
    </script>

<a-scene background="color: #212" antialias="true">

      <!-- Player object-->
      <a-entity id="cameraRig">
        <!-- camera -->
        <a-entity
          id="head"
          camera
          wasd-controls
          look-controls
          position="0 3.2 0"
        ></a-entity>
        <!-- hand controls -->
        <!-- teleport-controls="cameraRig: #cameraRig; teleportOrigin: #head;"-->
        <a-entity
          id="leftHand"
          laser-controls="hand: left"
          teleport-controls="type: parabolic; collisionEntities: #ground;"
          haptics
          raycaster="objects: [mixin='chalkboard']"
        ></a-entity>
        <!-- <a-entity id="teleHand" laser-controls="hand: left" teleport-controls="type: parabolic;"></a-entity> -->
        <a-entity
          id="rightHand"
          line="color: #118A7E"
        ></a-entity>
      </a-entity>
      

      <!-- Others stuff -->
      <!-- <a-entity position="0 3.2 0" camera look-controls wasd-controls></a-entity> -->
      <a-light position="0 0.5 1" intensity="0.75"></a-light>
      <a-entity position="0 0 -10">
        <a-mixin
          id="chalkboard"
          geometry="primitive: box"
          material="color: #FAFAFA"
          rotation="0 0 0"
          scale="15 10 0.1"
          intersect-color-change
          shadow="cast: true; receive: false"
        ></a-mixin>
        <a-mixin
            id="paint"
            geometry="primitive: circle"
            material="color: #fcf003"
            rotation="0 0 0"
            scale="0.3 0.3 0.3"
            radius="1"
        ></a-mixin>
        <a-entity id="stage" stage></a-entity>
        <a-circle
          id="ground"
          rotation="-90 0 0"
          radius="20"
          color="#666"
          position="0 -0.1 0"
          shadow="receive: true"
          roughness="1"
        ></a-circle>
        <a-light
          type="point"
          position="0 10 -30"
          intensity="0.85"
          shadow-if-mobile
        ></a-light>
      </a-entity>
    </a-scene>
  </body>
</html>
